<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>LDAP Admin Dashboard</title>
    <style>body{font-family:system-ui, -apple-system, Segoe UI, Roboto; margin:20px} pre{background:#111;color:#eee;padding:10px;border-radius:8px;overflow:auto}</style>
  </head>
  <body>
    <h1>LDAP Admin Dashboard</h1>
    <div>
      <input id="username" placeholder="uid"/>
      <input id="password" placeholder="password" type="password"/>
      <button onclick="login()">Login</button>
    </div>
    <div>
      <button onclick="search()">Search People</button>
    </div>
    <pre id="out"></pre>
    <script>
      let token = null;
      async function login(){
        const r = await fetch('/api/login', {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({username:document.getElementById('username').value,password:document.getElementById('password').value})});
        const j = await r.json(); token = j.access_token; document.getElementById('out').textContent = JSON.stringify(j,null,2);
      }
      async function search(){
        const r = await fetch('/api/search', {method:'POST', headers:{'Content-Type':'application/json', 'Authorization': 'Bearer '+token}, body:JSON.stringify({base:'dc=college,dc=local', filter:'(objectClass=*)'})});
        document.getElementById('out').textContent = JSON.stringify(await r.json(), null, 2);
      }
    </script>
  </body>
  </html>








